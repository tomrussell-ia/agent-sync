{
  "name": "run-tests",
  "description": "Run pytest tests and interpret results for Agent Sync",
  "version": "1.0.0",
  "triggers": [
    "run tests",
    "execute tests",
    "test the code",
    "run pytest",
    "check if tests pass"
  ],
  "inputs": {
    "test_path": {
      "description": "Optional path to specific test file or directory",
      "type": "string",
      "required": false,
      "default": "tests/"
    },
    "options": {
      "description": "Additional pytest options",
      "type": "array",
      "required": false,
      "examples": ["-v", "--cov", "-k pattern"]
    }
  },
  "steps": [
    {
      "step": 1,
      "action": "Verify pytest is installed",
      "command": "python -m pytest --version",
      "on_error": "Install pytest: pip install pytest pytest-cov"
    },
    {
      "step": 2,
      "action": "Run tests with specified options",
      "command": "python -m pytest {test_path} {options}",
      "example": "python -m pytest tests/ -v --cov=agent_sync"
    },
    {
      "step": 3,
      "action": "Interpret results",
      "checks": [
        "Count passed/failed/skipped tests",
        "Identify failing tests by name",
        "Extract error messages and tracebacks",
        "Report coverage percentage if --cov used",
        "Highlight any warnings"
      ]
    },
    {
      "step": 4,
      "action": "Provide actionable summary",
      "output": [
        "Overall pass/fail status",
        "List of failing tests with brief error description",
        "Coverage summary if available",
        "Suggested next steps if failures detected"
      ]
    }
  ],
  "output_format": {
    "success": {
      "status": "✓ All tests passed",
      "summary": "X tests passed in Y seconds",
      "coverage": "Coverage: Z%"
    },
    "failure": {
      "status": "✗ Tests failed",
      "failed_tests": ["test_name: error message"],
      "next_steps": ["Fix test_name by...", "Check logs for..."]
    }
  },
  "examples": [
    {
      "trigger": "Run all tests",
      "execution": "python -m pytest tests/ -v",
      "interpretation": "Report pass/fail count, list any failures"
    },
    {
      "trigger": "Run tests with coverage",
      "execution": "python -m pytest tests/ --cov=agent_sync --cov-report=term",
      "interpretation": "Report results + coverage percentage by module"
    },
    {
      "trigger": "Run specific test file",
      "execution": "python -m pytest tests/test_scanner.py -v",
      "interpretation": "Report results for that file only"
    }
  ],
  "error_handling": {
    "pytest_not_found": "Install pytest: pip install pytest",
    "import_errors": "Check dependencies: pip install -e .",
    "no_tests_found": "Verify test path is correct",
    "syntax_errors": "Fix syntax errors in test files before running"
  }
}
